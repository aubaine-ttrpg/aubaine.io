{% set ability = skill.ability %}
{% set aptitude = skill.aptitude %}
{% set abilityLabel = ability != enum('App\\Enum\\Ability').NONE ? ('skill.ability.' ~ ability.value)|trans({}, 'skills', exportLocale) : null %}
{% set aptitudeLabel = aptitude != enum('App\\Enum\\Aptitude').NONE ? ('skill.aptitude.' ~ aptitude.value)|trans({}, 'skills', exportLocale) : null %}
{% set showMeta = abilityLabel or aptitudeLabel %}
{% set prerequisites = skill.prerequisites ? skill.prerequisites|trim : '' %}
{% set limitations = skill.limitations ? skill.limitations|trim : '' %}
{% set requirements = skill.requirements ? skill.requirements|trim : '' %}
{% set timing = skill.timing ? skill.timing|trim : '' %}
{% set range = skill.range ? skill.range|trim : '' %}
{% set duration = skill.duration ? skill.duration|trim : '' %}
{% set energyValue = skill.energy ? skill.energy|trim : '' %}
{% set tagsLine = this.tagsLine %}

<article class="py-[10px] px-[20px] text-[1rem] text-left text-black font-['Georgia','Times New Roman'] inline-block leading-normal min-w-full">
    {# Skill Name and Meta #}
    <div class="text-[1.4rem] leading-none flex items-center gap-1 break-after-avoid p-0">
        {% if skill.isUltimate %}
            <span>{{ ux_icon('game-icons:crystal-shine', { class: 'w-6 h-6 text-[#003A6D]' }) }}</span>
        {% endif %}
        
        {% if displayCode %}
            <span class="font-mono font-light text-gray-500">[{{ skill.code }}]</span>
        {% endif %}

        <div class="gap-2 flex flex-row w-full items-center">
            <h1 class="font-semibold [font-variant-caps:small-caps] tracking-wide text-[#EFBF04]">{{ skill.name }}</h1>
            {% if showMeta %}
                <span class="font-serif font-medium text-[12px] text-white italic bg-[#6D0000] py-[2px] px-1 rounded-sm">
                    {{ abilityLabel }}{% if abilityLabel and aptitudeLabel %} / {% endif %}{{ aptitudeLabel }}
                </span>
            {% endif %}
        </div>
    </div>

    {# Prerequisites #}
    <div class="font-serif text-[12px] italic text-gray-800 pb-1">
        {{ 'skill.label.prerequisites'|trans({}, 'skills', exportLocale) }}:
        {% if prerequisites %}
            {{ prerequisites }}
        {% else %}
            {{ 'skill.common.none'|trans({}, 'skills', exportLocale) }}
        {% endif %}
    </div>

    {# Skill Details #}
    <div class="text-[12px] pb-1">
        {% if limitations %}
            <div>
                <span class="font-semibold">{{ 'skill.label.limitations'|trans({}, 'skills', exportLocale) }}:</span>
                {{ limitations }}
            </div>
        {% endif %}

        {% if requirements %}
            <div>
                <span class="font-semibold">{{ 'skill.label.requirements'|trans({}, 'skills', exportLocale) }}:</span>
                {{ requirements }}
            </div>
        {% endif %}

        {% if energyValue %}
            <div>
                <span class="font-semibold">{{ 'skill.label.energy'|trans({}, 'skills', exportLocale) }}:</span>
                {{ energyValue }}
            </div>
        {% endif %}

        {% if timing %}
            <div>
                <span class="font-semibold">{{ 'skill.label.time'|trans({}, 'skills', exportLocale) }}:</span>
                {{ timing }}
            </div>
        {% endif %}

        {% if range %}
            <div>
                <span class="font-semibold">{{ 'skill.label.range'|trans({}, 'skills', exportLocale) }}:</span>
                {{ range }}
            </div>
        {% endif %}

        {% if duration %}
            <div>
                <span class="font-semibold">{{ 'skill.label.duration'|trans({}, 'skills', exportLocale) }}:</span>
                {{ duration }}
            </div>
        {% endif %}

        <div>
            <span class="font-semibold">{{ 'skill.label.tags'|trans({}, 'skills', exportLocale) }}:</span>
            {{ tagsLine }}
        </div>
    </div>

    {# Description #}
    <div class="whitespace-pre-line text-[12px] leading-none text-justify">{{ skill.description }}</div>
</article>
