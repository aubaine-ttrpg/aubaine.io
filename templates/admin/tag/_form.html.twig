{% set submit_label = submit_label ?? 'Save' %}
{% set icon_path = iconSrc ?? 'https://placehold.co/90?text=?' %}

{{ form_start(form, { attr: { 'data-turbo': 'false', 'data-controller': 'locale-toggle', 'data-locale-toggle-active-value': 'fr' } }) }}
    <div class="space-y-4">
        <div class="flex justify-end gap-2">
            <button type="button" class="btn btn-primary flex justify-center items-center gap-2" data-locale-toggle-target="tab" data-locale="fr" data-action="click->locale-toggle#switch">
                {{ ux_icon('flagpack:fr', { class: 'w-5 h-5' }) }}
                <span>Fran√ßais</span>
            </button>
            <button type="button" class="btn btn-ghost flex justify-center items-center gap-2" data-locale-toggle-target="tab" data-locale="en" data-action="click->locale-toggle#switch">
                {{ ux_icon('flagpack:gb-ukm', { class: 'w-5 h-5' }) }}
                <span>English</span>
            </button>
        </div>

        <div class="card p-5 space-y-4 max-w-3xl">
            <div class="grid grid-cols-1 lg:grid-cols-[auto_1fr] gap-4 items-center" data-controller="icon-preview" data-icon-preview-placeholder-value="{{ icon_path }}">
                <div class="icon-edit-wrap w-[96px] h-[96px]" data-icon-preview-target="preview" title="Click to change icon" data-action="click->icon-preview#triggerUpload">
                    <img src="{{ icon_path }}" alt="" class="w-full h-full object-cover rounded-lg" onerror="this.onerror=null; this.src='https://placehold.co/90?text=?';">
                    <div class="icon-edit-overlay">
                        {{ ux_icon('heroicons:paint-brush', { class: 'w-6 h-6 text-sky-200' }) }}
                    </div>
                </div>
                {{ form_widget(form.icon, { attr: { class: 'hidden', 'data-icon-preview-target': 'input', 'data-action': 'change->icon-preview#updatePreview' } }) }}

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                    <div class="space-y-1">
                        <label class="label" for="{{ form.category.vars.id }}">Category</label>
                        {{ form_widget(form.category, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.code.vars.id }}">Code</label>
                        {{ form_widget(form.code, { attr: { class: 'input' } }) }}
                    </div>
                </div>
            </div>

            <div class="space-y-2">
                <div data-locale-toggle-target="panel" data-locale="fr">
                    <label class="label" for="{{ form.label.vars.id }}">Label (FR)</label>
                    {{ form_widget(form.label, { attr: { class: 'input' } }) }}
                </div>
                <div class="hidden" data-locale-toggle-target="panel" data-locale="en">
                    <label class="label" for="{{ form.label_en.vars.id }}">Label (EN)</label>
                    {{ form_widget(form.label_en, { attr: { class: 'input' } }) }}
                </div>
            </div>

            <div class="space-y-2">
                <div data-locale-toggle-target="panel" data-locale="fr">
                    <label class="label" for="{{ form.description.vars.id }}">Description (FR)</label>
                    {{ form_widget(form.description, { attr: { class: 'input min-h-[160px]' } }) }}
                </div>
                <div class="hidden" data-locale-toggle-target="panel" data-locale="en">
                    <label class="label" for="{{ form.description_en.vars.id }}">Description (EN)</label>
                    {{ form_widget(form.description_en, { attr: { class: 'input min-h-[160px]' } }) }}
                </div>
            </div>

            <div class="flex justify-end">
                <button type="submit" class="btn btn-primary">{{ submit_label }}</button>
            </div>
        </div>
    </div>
{{ form_end(form) }}
