{% extends 'base.html.twig' %}

{% block title %}Tag {{ tag.code }}{% endblock %}

{% block body %}
    <main class="max-w-3xl mx-auto px-4 py-8 space-y-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm text-slate-400 space-x-1">
                    <a href="{{ path('admin_home') }}" class="hover:text-sky-300">Admin</a>
                    <span>/</span>
                    <a href="{{ path('admin_tag_index') }}" class="hover:text-sky-300">Tags</a>
                    <span>/</span>
                    <span class="text-slate-300">{{ tag.code }}</span>
                </p>
                <h1 class="text-3xl font-semibold">{{ tag.label }}</h1>
            </div>
            <a href="{{ path('admin_tag_edit', { id: tag.id }) }}" class="btn btn-primary">Edit</a>
        </div>

        <div data-controller="locale-toggle" data-locale-toggle-active-value="fr" class="space-y-3">
            <div class="flex justify-end gap-2">
                <button type="button" class="btn btn-primary flex items-center gap-2" data-locale-toggle-target="tab" data-locale="fr" data-action="click->locale-toggle#switch">
                    {{ ux_icon('flagpack:fr', { class: 'w-5 h-5' }) }}
                    <span>Français</span>
                </button>
                <button type="button" class="btn btn-ghost flex items-center gap-2" data-locale-toggle-target="tab" data-locale="en" data-action="click->locale-toggle#switch">
                    {{ ux_icon('flagpack:gb-ukm', { class: 'w-5 h-5' }) }}
                    <span>English</span>
                </button>
            </div>

            <div class="card p-5 space-y-3">
                <div data-locale-toggle-target="panel" data-locale="fr" class="space-y-2">
                    <div class="flex justify-between border-b border-slate-800 pb-2">
                        <dt class="text-slate-400">Label</dt>
                        <dd class="font-semibold">{{ translations.fr.label ?: '—' }}</dd>
                    </div>
                    <div class="space-y-1">
                        <dt class="text-slate-400">Description</dt>
                        <dd class="font-semibold whitespace-pre-line">{{ translations.fr.description ?: '—' }}</dd>
                    </div>
                </div>

                <div class="space-y-2 hidden" data-locale-toggle-target="panel" data-locale="en">
                    <div class="flex justify-between border-b border-slate-800 pb-2">
                        <dt class="text-slate-400">Label</dt>
                        <dd class="font-semibold">{{ translations.en.label ?: '—' }}</dd>
                    </div>
                    <div class="space-y-1">
                        <dt class="text-slate-400">Description</dt>
                        <dd class="font-semibold whitespace-pre-line">{{ translations.en.description ?: '—' }}</dd>
                    </div>
                </div>
            </div>
        </div>

        <div class="card p-6 space-y-4">
            <div class="flex justify-between border-b border-slate-800 pb-2 items-center">
                <dt class="text-slate-400">Icon</dt>
                <dd class="font-semibold">
                    {% if tag.icon %}
                        {% if tag.icon matches '/:/' %}
                            {{ ux_icon(tag.icon, { class: 'w-10 h-10 text-slate-200' }) }}
                        {% else %}
                            <img src="{{ tag.icon }}" alt="" class="w-10 h-10 object-cover rounded-lg border border-slate-800" onerror="this.onerror=null; this.remove();">
                        {% endif %}
                    {% else %}
                        {{ ux_icon(tag.category.icon(), { class: 'w-6 h-6 text-slate-200' }) }}
                    {% endif %}
                </dd>
            </div>
            <div class="flex justify-between border-b border-slate-800 pb-2">
                <dt class="text-slate-400">Code</dt>
                <dd class="font-semibold">{{ tag.code }}</dd>
            </div>
            <div class="flex justify-between border-b border-slate-800 pb-2">
                <dt class="text-slate-400">Label</dt>
                <dd class="font-semibold">{{ tag.label }}</dd>
            </div>
            <div class="flex justify-between border-b border-slate-800 pb-2">
                <dt class="text-slate-400">Category</dt>
                <dd class="font-semibold">{{ tag.category.labelKey()|trans({}, 'tag') }}</dd>
            </div>
            <div class="space-y-1 border-b border-slate-800 pb-2">
                <dt class="text-slate-400">Description</dt>
                <dd class="font-semibold whitespace-pre-line">{{ tag.description ?: '—' }}</dd>
            </div>
            <div class="flex justify-between">
                <dt class="text-slate-400">Created</dt>
                <dd class="font-semibold">{{ tag.createdAt|date('Y-m-d H:i') }}</dd>
            </div>
        </div>
    </main>
{% endblock %}
