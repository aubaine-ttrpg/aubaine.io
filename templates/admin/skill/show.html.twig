{% extends 'base.html.twig' %}

{% block title %}Skill: {{ skill.name }}{% endblock %}

{% block body %}
    <main class="max-w-6xl mx-auto px-4 py-8 space-y-6">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
                {% set iconPath = skill.icon ?? null %}
                <div class="rounded-2xl overflow-hidden border border-slate-800 bg-slate-900 w-[75px] h-[75px]">
                    <img src="{{ iconPath ?: 'https://placehold.co/75?text=?' }}" alt="" class="w-full h-full object-cover" onerror="this.onerror=null; this.src='https://placehold.co/75?text=?';">
                </div>
                <div>
                    <p class="text-sm text-slate-400 space-x-1">
                        <a href="{{ path('admin_home') }}" class="hover:text-sky-300">Admin</a>
                        <span>/</span>
                        <a href="{{ path('admin_skill_index') }}" class="hover:text-sky-300">Skills</a>
                        <span>/</span>
                        <span class="text-slate-300">{{ skill.name }}</span>
                    </p>
                    <h1 class="text-3xl font-semibold">{{ skill.name }} ({{ skill.code }})</h1>
                </div>
            </div>
            <div class="flex gap-2">
                <a class="btn btn-ghost" href="{{ path('admin_skill_index') }}">← Back to list</a>
                <a class="btn btn-primary" href="{{ path('admin_skill_edit', { id: skill.id }) }}">✏️ Edit</a>
            </div>
        </div>

        <div class="card p-6">
            <h2 class="text-xl font-semibold mb-3">Description</h2>
            <p class="text-slate-200 leading-relaxed whitespace-pre-line">{{ skill.description }}</p>
        </div>

        <div class="card p-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
            <dl class="space-y-3">
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Category</dt><dd class="font-semibold">{{ ('skill.category.' ~ skill.category.value)|trans({}, 'skills') }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Type</dt><dd class="font-semibold">{{ ('skill.type.' ~ skill.type.value)|trans({}, 'skills') }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Energy</dt><dd class="font-semibold">{{ skill.energyCost }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Ultimate</dt><dd class="font-semibold">{{ skill.isUltimate ? 'Yes' : 'No' }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Usage limit</dt>
                    <dd class="font-semibold">
                        {{ skill.usageLimitAmount }} / {{ ('skill.limit_period.' ~ skill.usageLimitPeriod.value)|trans({}, 'skills') }}
                    </dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Range</dt><dd class="font-semibold">{{ ('skill.range.' ~ skill.range.value)|trans({}, 'skills') }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Duration</dt><dd class="font-semibold">{{ ('skill.duration.' ~ skill.duration.value)|trans({}, 'skills') }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Source</dt><dd class="font-semibold">{{ ('skill.source.' ~ skill.source.value)|trans({}, 'skills') }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Abilities</dt><dd class="font-semibold">{{ skill.abilities|map(a => ('skill.ability.' ~ a.value)|trans({}, 'skills'))|join(', ') }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Tags</dt><dd class="font-semibold">{{ skill.tags|map(t => ('skill.tag.' ~ t.value)|trans({}, 'skills'))|join(', ') }}</dd>
                </div>
            </dl>

            <dl class="space-y-3">
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Concentration</dt><dd class="font-semibold">{{ skill.hasConcentration ? 'Yes' : 'No' }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Ritual</dt><dd class="font-semibold">{{ skill.hasRitual ? 'Yes' : 'No' }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Attack roll</dt><dd class="font-semibold">{{ skill.hasAttackRoll ? 'Yes' : 'No' }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Saving throw</dt><dd class="font-semibold">{{ skill.hasSavingThrow ? 'Yes' : 'No' }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Ability check</dt><dd class="font-semibold">{{ skill.hasAbilityCheck ? 'Yes' : 'No' }}</dd>
                </div>
                <div class="flex justify-between border-b border-slate-800 pb-2">
                    <dt class="text-slate-400">Materials</dt><dd class="font-semibold">{{ skill.materials ?? '—' }}</dd>
                </div>
            </dl>
        </div>
    </main>
{% endblock %}
