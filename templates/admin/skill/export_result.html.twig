{% extends 'base.html.twig' %}

{% if export_name is not empty %}
    {% set export_title = export_name %}
{% else %}
    {% set export_title = 'Export Skills' %}
{% endif %}
{% set export_title = export_title ~ ' - ' ~ ('now'|date('d/m/Y H\\hi\\ms\\s')) %}

{% block title %}{{ export_title }}{% endblock %}

{% block body %}
    <main class="max-w-6xl mx-auto px-4 py-8 print:max-w-full print:p-0 flex flex-col gap-6">
        {# HIDDEN IN PRINT: Breadcrumbs, Title, Export Info, Actions #}
        <div class="hide-print flex items-center justify-between">
            <div>
                <p class="text-sm text-slate-400">
                    <a href="{{ path('admin_home') }}" class="hover:text-sky-300">Admin</a>
                    <span>/</span>
                    <a href="{{ path('admin_skill_index') }}" class="hover:text-sky-300">Skills</a>
                    <span>/</span>
                    <span class="text-slate-300">Export</span>
                </p>
                <h1 class="text-3xl font-semibold">Export Result {% if skills is not empty %}({{ skills|length }} skills){% endif %}</h1>
                <p class="text-mono text-sm">Export filters: {{ export_filters|json_encode() }}</p>
            </div>

            <div>
                <a class="btn btn-ghost" href="{{ path('admin_skill_export') }}">← New export</a>
                {% if hash %}
                    <button class="btn btn-info" onclick="navigator.clipboard.writeText('{{ url('admin_skill_export_hash', { hash: hash }) }}');" title="Copy export link to clipboard">
                        {{ ux_icon('heroicons:clipboard-document') }}
                        <span>Copy to clipboard</span>
                    </button>
                {% endif %}
            </div>
        </div>

        {# PRINT: Export Title + Skill Export Cards #}
        {% if skills is not empty %}
        <div class="bg-white rounded-sm print:rounded-none shadow-sm print:shadow-none">
            {% if export_name is not empty %}
            <div class="print-title py-[10px] px-[20px] text-black">
                <div class="text-left text-lg font-semibold">Aubaine · {{ export_name }}</div>
                <hr class="h-1 w-full bg-black border-0">
            </div>
            {% endif %}
            <div class="print-columns gap-6 print:gap-0">
                {% for skill in skills %}
                    {{ component('SkillExportCard', { skill: skill, displayCode: display_code, exportLocale: export_locale }) }}
                {% endfor %}
            </div>
        {% else %}
            <div class="card p-6 text-slate-300">No skills match the current filters.</div>
        {% endif %}
    </main>
{% endblock %}
