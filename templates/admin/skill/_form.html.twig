{% set icon_path = iconSrc ?? 'https://placehold.co/90?text=?' %}
{% set submit_label = submit_label ?? 'Save' %}

{{ form_start(form, { attr: { 'data-turbo': 'false', 'data-controller': 'locale-toggle', 'data-locale-toggle-active-value': 'fr' } }) }}
    <div class="space-y-4">
        <div class="flex justify-end gap-2">
            <button type="button" class="btn btn-primary flex justify-center items-center gap-2" data-locale-toggle-target="tab" data-locale="fr" data-action="click->locale-toggle#switch">
                {{ ux_icon('flagpack:fr', { class: 'w-5 h-5' }) }}
                <span>Francais</span>
            </button>
            <button type="button" class="btn btn-ghost flex justify-center items-center gap-2" data-locale-toggle-target="tab" data-locale="en" data-action="click->locale-toggle#switch">
                {{ ux_icon('flagpack:gb-ukm', { class: 'w-5 h-5' }) }}
                <span>English</span>
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="card p-5 space-y-4 lg:col-span-1">
                <div class="flex items-end gap-4" data-controller="icon-preview" data-icon-preview-placeholder-value="{{ icon_path }}">
                    <div class="icon-edit-wrap" data-icon-preview-target="preview" title="Click to change icon" data-action="click->icon-preview#triggerUpload">
                        <img src="{{ icon_path }}" alt="" onerror="this.onerror=null; this.src='https://placehold.co/90?text=?';">
                        <div class="icon-edit-overlay">
                            {{ ux_icon('heroicons:paint-brush', { class: 'w-6 h-6 text-sky-200' }) }}
                        </div>
                    </div>
                    {{ form_widget(form.icon, { attr: { class: 'hidden', 'data-icon-preview-target': 'input', 'data-action': 'change->icon-preview#updatePreview' } }) }}

                    <div class="flex-1 space-y-3" data-locale-toggle-target="panel" data-locale="fr">
                        <div>
                            <label class="label" for="{{ form.name.vars.id }}">Name (FR)</label>
                            {{ form_widget(form.name, { attr: { class: 'input' } }) }}
                        </div>
                    </div>
                    <div class="flex-1 space-y-3 hidden" data-locale-toggle-target="panel" data-locale="en">
                        <div>
                            <label class="label" for="{{ form.name_en.vars.id }}">Name (EN)</label>
                            {{ form_widget(form.name_en, { attr: { class: 'input' } }) }}
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="label" for="{{ form.code.vars.id }}">Code</label>
                        {{ form_widget(form.code, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.category.vars.id }}">Category</label>
                        {{ form_widget(form.category, { attr: { class: 'input' } }) }}
                    </div>
                </div>

                <label class="input flex items-center justify-between gap-3" for="{{ form.ultimate.vars.id }}">
                    <span class="flex items-center gap-1 text-slate-200">
                        {{ ux_icon('game-icons:evil-wings', { class: 'w-5 h-5' }) }}
                        <span>Ultimate</span>
                    </span>
                    {{ form_widget(form.ultimate) }}
                </label>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="label" for="{{ form.ability.vars.id }}">Ability</label>
                        {{ form_widget(form.ability, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.aptitude.vars.id }}">Aptitude</label>
                        {{ form_widget(form.aptitude, { attr: { class: 'input' } }) }}
                    </div>
                </div>

                <div class="space-y-4" data-locale-toggle-target="panel" data-locale="fr">
                    <div>
                        <label class="label" for="{{ form.limitations.vars.id }}">Limitations (FR)</label>
                        {{ form_widget(form.limitations, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.prerequisites.vars.id }}">Prerequisites (FR)</label>
                        {{ form_widget(form.prerequisites, { attr: { class: 'input' } }) }}
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="label" for="{{ form.energy.vars.id }}">Energy (FR)</label>
                            {{ form_widget(form.energy, { attr: { class: 'input' } }) }}
                        </div>
                        <div>
                            <label class="label" for="{{ form.timing.vars.id }}">Timing (FR)</label>
                            {{ form_widget(form.timing, { attr: { class: 'input' } }) }}
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="label" for="{{ form.range.vars.id }}">Range (FR)</label>
                            {{ form_widget(form.range, { attr: { class: 'input' } }) }}
                        </div>
                        <div>
                            <label class="label" for="{{ form.duration.vars.id }}">Duration (FR)</label>
                            {{ form_widget(form.duration, { attr: { class: 'input' } }) }}
                        </div>
                    </div>
                </div>

                <div class="space-y-4 hidden" data-locale-toggle-target="panel" data-locale="en">
                    <div>
                        <label class="label" for="{{ form.limitations_en.vars.id }}">Limitations (EN)</label>
                        {{ form_widget(form.limitations_en, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.prerequisites_en.vars.id }}">Prerequisites (EN)</label>
                        {{ form_widget(form.prerequisites_en, { attr: { class: 'input' } }) }}
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="label" for="{{ form.energy_en.vars.id }}">Energy (EN)</label>
                            {{ form_widget(form.energy_en, { attr: { class: 'input' } }) }}
                        </div>
                        <div>
                            <label class="label" for="{{ form.timing_en.vars.id }}">Timing (EN)</label>
                            {{ form_widget(form.timing_en, { attr: { class: 'input' } }) }}
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="label" for="{{ form.range_en.vars.id }}">Range (EN)</label>
                            {{ form_widget(form.range_en, { attr: { class: 'input' } }) }}
                        </div>
                        <div>
                            <label class="label" for="{{ form.duration_en.vars.id }}">Duration (EN)</label>
                            {{ form_widget(form.duration_en, { attr: { class: 'input' } }) }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="card p-5 lg:col-span-2">
                <div class="space-y-4" data-locale-toggle-target="panel" data-locale="fr">
                    <div>
                        <label class="label" for="{{ form.requirements.vars.id }}">Requirements (FR)</label>
                        {{ form_widget(form.requirements, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.description.vars.id }}">Description (FR)</label>
                        {{ form_widget(form.description, { attr: { class: 'input min-h-[240px]' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.tags.vars.id }}">Tags (FR)</label>
                        {{ form_widget(form.tags, { attr: { class: 'input min-h-[80px]' } }) }}
                    </div>
                </div>

                <div class="space-y-4 hidden" data-locale-toggle-target="panel" data-locale="en">
                    <div>
                        <label class="label" for="{{ form.requirements_en.vars.id }}">Requirements (EN)</label>
                        {{ form_widget(form.requirements_en, { attr: { class: 'input' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.description_en.vars.id }}">Description (EN)</label>
                        {{ form_widget(form.description_en, { attr: { class: 'input min-h-[240px]' } }) }}
                    </div>
                    <div>
                        <label class="label" for="{{ form.tags_en.vars.id }}">Tags (EN)</label>
                        {{ form_widget(form.tags_en, { attr: { class: 'input min-h-[80px]' } }) }}
                    </div>
                </div>
            </div>
        </div>

        <div class="flex justify-end">
            <button type="submit" class="btn btn-primary">{{ submit_label }}</button>
        </div>
    </div>
{{ form_end(form) }}
